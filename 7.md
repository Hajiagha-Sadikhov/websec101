### 7. AdÄ±m: Ä°leri Seviye Web SaldÄ±rÄ± Teknikleri (XXE, CSRF, SSRF)

Åimdiye kadar temel ve yaygÄ±n aÃ§Ä±klarÄ±, gÃ¼venlik mimarisini ve gerÃ§ek hayattan Ã¶rneklerle pratik yapmayÄ± gÃ¶rdÃ¼k. ArtÄ±k daha ileri seviye saldÄ±rÄ± yÃ¶ntemlerine geÃ§menin vakti geldi. Bu adÄ±mda, adÄ±nÄ± sÄ±k duymayabileceÄŸin ancak bug bounty camiasÄ±nda ve geliÅŸmiÅŸ saldÄ±rÄ± senaryolarÄ±nda sÄ±kÃ§a karÅŸÄ±laÅŸabileceÄŸin aÃ§Ä±k tÃ¼rlerini inceleyeceÄŸiz:

- **XXE (XML External Entity)**
- **CSRF (Cross-Site Request Forgery)**
- **SSRF (Server-Side Request Forgery)**

Bu tÃ¼r aÃ§Ä±klar, genellikle karmaÅŸÄ±k mimarilerde, API tabanlÄ± uygulamalarda veya mikro servis ortamlarÄ±nda ortaya Ã§Ä±kar. Biraz daha teknik derinlik gerektirirler, ancak onlarÄ± anladÄ±ÄŸÄ±nda rekabette bir adÄ±m Ã¶ne geÃ§ersin.

---

### 7.1 XXE (XML External Entity) Nedir?

**[XXE](./19.md)**, XML tabanlÄ± veri iÅŸleme yapan uygulamalarda ortaya Ã§Ä±kan bir zafiyettir. SaldÄ±rgan, XML iÃ§inde tanÄ±mlanmÄ±ÅŸ harici varlÄ±klarÄ± manipÃ¼le ederek sunucunun yerel dosyalarÄ±na eriÅŸebilir, dahili sistemleri keÅŸfedebilir veya DoS (Hizmet Kesintisi) yaratabilir.

**Basit Ã–rnek:**

```xml
<!DOCTYPE foo [ <!ENTITY xxe SYSTEM "file:///etc/passwd"> ]>
<root>&xxe;</root>
```

Bu ÅŸekilde, saldÄ±rgan sunucudaki dosyalarÄ± okuyabilir veya dahili aÄŸa istek yapabilir.

**Savunma:**
- XML iÅŸlemcide harici varlÄ±klarÄ± kapatmak.
- KÃ¼tÃ¼phaneleri gÃ¼ncel tutmak.
- Safe parser kullanmak.

---

### 7.2 CSRF (Cross-Site Request Forgery)

**[CSRF](./12.md)**, bir kullanÄ±cÄ±nÄ±n tarayÄ±cÄ±sÄ± Ã¼zerinden hedeflenen bir siteye istenmeyen bir aksiyon yaptÄ±rma tekniÄŸidir. KullanÄ±cÄ±nÄ±n oturumu aÃ§Ä±ksa, saldÄ±rgan kullanÄ±cÄ±nÄ±n tarayÄ±cÄ±sÄ±nÄ± kullanarak hesabÄ± Ã¼zerinde iÅŸlem yapabilir.

**Klasik Senaryo:**
- KullanÄ±cÄ± bir bankacÄ±lÄ±k sitesinde oturum aÃ§ar.
- AynÄ± tarayÄ±cÄ±da saldÄ±rganÄ±n hazÄ±rladÄ±ÄŸÄ± zararlÄ± bir siteye girer.
- ZararlÄ± site, kullanÄ±cÄ±nÄ±n farkÄ±nda olmadan bankacÄ±lÄ±k sitesine para transferi isteÄŸi gÃ¶nderir.

**Savunma:**
- CSRF Token kullanÄ±mÄ±.
- SameSite Ã§erez ayarlarÄ±.
- KullanÄ±cÄ±nÄ±n gerÃ§ekleÅŸtirilen iÅŸlemi onaylamasÄ± iÃ§in ek doÄŸrulama adÄ±mlarÄ± (2FA, Captcha).

---

### 7.3 SSRF (Server-Side Request Forgery)

**[SSRF](./15.md)**, sunucunun kendisi Ã¼zerinden istek gÃ¶ndererek iÃ§ aÄŸ kaynaklarÄ±na eriÅŸme, dahili APIâ€™larÄ± keÅŸfetme veya bulut servislerine yÃ¶nelme saldÄ±rÄ±larÄ±dÄ±r. SaldÄ±rgan, uygulamaya kÃ¶tÃ¼ niyetli bir URL vererek sunucunun bu URLâ€™ye istek yapmasÄ±nÄ± saÄŸlar. Ã–rneÄŸin:

``` 
GET /?url=http://127.0.0.1:8080/internal-api
```

Bu sayede saldÄ±rgan dahili sistemleri gÃ¶rebilir, hatta AWS IMDS (Instance Metadata Service) gibi servislerden hassas bilgileri Ã§alabilir.

**Savunma:**
- Harici isteklere sÄ±nÄ±rlama getirmek.
- URL beyaz listesi oluÅŸturmak.
- Requestâ€™leri filtrelemek, IP bloklamalarÄ± yapmak.

---

### 7.4 Pratikte Ä°leri Seviye AÃ§Ä±klarÄ± Denemek

**OWASP WebGoat**, **OWASP Juice Shop** ve **PortSwigger Web Security Academy** gibi platformlar XXE, CSRF ve SSRF iÃ§eren senaryolar sunar. Burada pratik yaparak bu aÃ§Ä±klarÄ±n nasÄ±l Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ± ve nasÄ±l kapatÄ±lacaÄŸÄ±nÄ± deneyimleyebilirsin.

AyrÄ±ca bug bounty platformlarÄ±nda, program aÃ§Ä±klamalarÄ±nda bu tip aÃ§Ä±klarÄ±n hangi koÅŸullarda kabul edildiÄŸi yazar. Bu sayede gerÃ§ek uygulamalarda XXE, CSRF veya SSRF denemeleri yaparak skill setâ€™ini geniÅŸletebilirsin.

---

### 7.5 KapanÄ±ÅŸ

Ä°leri seviye aÃ§Ä±klar, â€œartÄ±k her ÅŸeyi biliyorumâ€ dediÄŸin anda karÅŸÄ±na Ã§Ä±kar. Bu aÃ§Ä±klar, temel bilgileri Ã¶ÄŸrenmiÅŸ, OWASP Top 10â€™un temellerini kavramÄ±ÅŸ, pratik yapmÄ±ÅŸ araÅŸtÄ±rmacÄ±larÄ± bir Ã¼st seviyeye taÅŸÄ±r.

KarmaÅŸÄ±k sistemlerde, mikro servis mimarilerinde, bulut altyapÄ±larÄ±nda bu zafiyetler sÄ±kÃ§a gÃ¶rÃ¼lÃ¼r. OnlarÄ± anlamak ve engellemek, seni hem saldÄ±rÄ± tarafÄ±nda hem de savunma tarafÄ±nda Ã§ok daha yetkin kÄ±lar.

SÄ±radaki adÄ±mda daha farklÄ± konseptlere veya Ã¶zelleÅŸmiÅŸ alanlara dalabiliriz. Ancak Ã¶nce, bu ileri seviye aÃ§Ä±klarÄ± sindir ve biraz pratik yap. ğŸ˜Š
